<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Sing up</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css"
          rel="stylesheet"
          integrity="sha384-+0n0xVW2eSR5OomGNYDnhzAbDsOXxcvSN1TPprVMTNDbiYZCxYbOOl7+AMvyTG2x"
          crossorigin="anonymous">
</head>
<body>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-gtEjrD/SeCtmISkJkNUaaKMoLD0//ElJ19smozuHV6z3Iehds+3Ulb9Bn9Plx0x4"
        crossorigin="anonymous"></script>

<div class="mx-auto" style="width:400px; margin-top: 100px;">
    <h1>EPOS_RE</h1>
    <h3 class="mb-4">Sing up</h3>
    <form method="post">
        <div class="mb-3">
            <label for="inputFullName" class="form-label">Full Name</label>
            <input type="text" class="form-control" id="inputFullName" aria-describedby="fullNameHelp"
                   name="displayedName" required>
            <div id="fullNameHelp" class="form-text">We'll display this name as your in application.</div>
        </div>
        <div class="mb-3">
            <label for="inputEmail" class="form-label">Email address</label>
            <input type="email" class="form-control" id="inputEmail" aria-describedby="emailHelp" name="username"
                   required>
            <div id="emailHelp" class="form-text">We'll never share your email with anyone else.</div>
        </div>
        <div class="mb-3">
            <label for="inputPassword" class="form-label">Password</label>
            <input type="password" class="form-control" id="inputPassword" name="password" required>
        </div>
        <div class="mb-3">
            <label for="inputRepeatPassword" class="form-label">Repeat Password</label>
            <input type="password" class="form-control" id="inputRepeatPassword" required>
        </div>
        <div class="mb-3">
            <input type="checkbox" id="termsOfUser">
            <label for="termsOfUser" class="form-label">
                I agree
                <a href="https://youtu.be/dQw4w9WgXcQ">Terms of User</a> <!--xD-->
            </label>
        </div>
        <input type="hidden" name="${_csrf.parameterName}" value="${_csrf.token}"/>
        <button type="submit" class="btn btn-primary" id="sendRegistration" disabled>Submit</button>
    </form>

    <div class="mt-3">
        <p>I you already have account you can
            <a href="login">Sing in</a>
        </p>
    </div>
</div>
</body>
<script>
    let termsCheckBox = document.getElementById('termsOfUser');
    let submitButton = document.getElementById('sendRegistration');

    let passwordField = document.getElementById('inputPassword');
    let confirmPasswordField = document.getElementById('inputRepeatPassword');

    termsCheckBox.addEventListener('change', (() => {
        submitButton.disabled = !termsCheckBox.checked;
    }));

    function validatePassword(){
        if (passwordField.value !== confirmPasswordField.value){
            confirmPasswordField.setCustomValidity("Passwords Don't Match");
        }else{
            confirmPasswordField.setCustomValidity('');
        }
    }

    passwordField.onchange = validatePassword;
    confirmPasswordField.onkeyup = validatePassword;
</script>
</html>
